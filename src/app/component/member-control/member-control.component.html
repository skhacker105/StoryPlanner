<div class="layer-control-container">

    <div class="action-buttons">
        <button mat-icon-button color="primary" (click)="loadAddMemberPopup()">
            <mat-icon>add_circle</mat-icon>
        </button>
        <div class="spacer"></div>
        <!-- Sorting Flip -->
        <app-sorting-button [sortBy]="sortBy" (onClick)="toggleSortBy()"></app-sorting-button>
        <!-- Download -->
        <button mat-icon-button color="primary">
            <mat-icon>download_2</mat-icon>
        </button>
        <!-- Upload -->
        <button mat-icon-button color="primary">
            <mat-icon>upload_2</mat-icon>
        </button>
    </div>
    <div class="layers">
        <mat-divider></mat-divider>
        @for (member of memberService.members.value | sort:sortBy; track member) {
            <app-member-display [member]="member" [isSelected]="compareSelectedMembers(member)"
                (onCLick)="handleMemberClick(member)"
                (onEdit)="loadEditMemberPopup($event)" (onDelete)="handleDeleteConfirmationPopup(member)">
            </app-member-display>
        }
    </div>

    <div class="member-options" *ngIf="selectedMember">
        <app-popup-header [title]="selectedMember.name" (onCloseTrigger)="resetSelectedRecord()">
        </app-popup-header>
        <div class="option-list-container">
            @for (option of selectedMember.options; track option) {
                <app-member-option-display [option]="option" (addToTimeLine)="addOptionToMovieTimeLine(selectedMember, option)">
                </app-member-option-display>
            }
        </div>
    </div>
</div>